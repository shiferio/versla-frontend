638c638
<                 template: "\n      <div id=\"ng-chat\" *ngIf=\"isBootstrapped\">\n          <div id=\"ng-chat-people\" [ngClass]=\"{'ng-chat-people-collapsed':isCollapsed}\">\n              <a href=\"javascript:void(0);\" class=\"ng-chat-title shadowed\" (click)=\"onChatTitleClicked($event)\">\n                  <span>\n                      {{localization.title}}\n                  </span>\n              </a>\n              <input id=\"ng-chat-search_friend\" type=\"search\" [placeholder]=\"localization.searchPlaceholder\" [(ngModel)]=\"searchInput\"/>\n              <ul id=\"ng-chat-users\" *ngIf=\"!isCollapsed\">\n                  <li *ngFor=\"let user of filteredUsers\" (click)=\"openChatWindow(user, true, true)\">\n                      <div *ngIf=\"!user.avatar\"  class=\"icon-wrapper\">\n                          <i class=\"user-icon\"></i>\n                      </div>\n                      <img *ngIf=\"user.avatar\" alt=\"\" class=\"avatar\" height=\"30\" width=\"30\"  src=\"{{user.avatar}}\"/>\n                      <strong title=\"{{user.displayName}}\">{{user.displayName}}</strong>\n                      <span [ngClass]=\"{'ng-chat-user-status': true, 'online': user.status == UserStatus.Online, 'busy': user.status == UserStatus.Busy, 'away': user.status == UserStatus.Away, 'offline': user.status == UserStatus.Offline}\" title=\"{{getStatusTitle(UserStatus[user.status])}}\"></span>\n                      <span *ngIf=\"unreadMessagesTotalByUser(user).length > 0\" class=\"ng-chat-unread-messages-count\">{{unreadMessagesTotalByUser(user)}}</span>\n                  </li>\n              </ul>\n          </div>\n          <div *ngFor=\"let window of windows; let i = index\" [ngClass]=\"{'ng-chat-window': true, 'ng-chat-window-collapsed': window.isCollapsed}\" [ngStyle]=\"{'right': friendsListWidth + 20 + windowSizeFactor * i + 'px'}\">\n              <ng-container *ngIf=\"window.isCollapsed\">\n                  <div class=\"ng-chat-title\" (click)=\"onChatWindowClicked(window)\">\n                      <strong title=\"{{window.chattingTo.displayName}}\">\n                          {{window.chattingTo.displayName}}\n                      </strong>\n                      <span [ngClass]=\"{'ng-chat-user-status': true, 'online': window.chattingTo.status == UserStatus.Online, 'busy': window.chattingTo.status == UserStatus.Busy, 'away': window.chattingTo.status == UserStatus.Away, 'offline': window.chattingTo.status == UserStatus.Offline}\" title=\"{{getStatusTitle(UserStatus[window.chattingTo.status])}}\"></span>\n                      <span *ngIf=\"unreadMessagesTotal(window).length > 0\" class=\"ng-chat-unread-messages-count\">{{unreadMessagesTotal(window)}}</span>\n                      <a href=\"javascript:void(0);\" class=\"ng-chat-close\" (click)=\"onCloseChatWindow(window)\">X</a>\n                  </div>\n              </ng-container>\n              <ng-container *ngIf=\"!window.isCollapsed\">\n                  <div class=\"ng-chat-title\" (click)=\"onChatWindowClicked(window)\">\n                      <strong title=\"{{window.chattingTo.displayName}}\">\n                          {{window.chattingTo.displayName}}\n                      </strong>\n                      <span [ngClass]=\"{'ng-chat-user-status': true, 'online': window.chattingTo.status == UserStatus.Online, 'busy': window.chattingTo.status == UserStatus.Busy, 'away': window.chattingTo.status == UserStatus.Away, 'offline': window.chattingTo.status == UserStatus.Offline}\" title=\"{{getStatusTitle(UserStatus[window.chattingTo.status])}}\"></span>\n                      <span *ngIf=\"unreadMessagesTotal(window).length > 0\" class=\"ng-chat-unread-messages-count\">{{unreadMessagesTotal(window)}}</span>\n                      <a href=\"javascript:void(0);\" class=\"ng-chat-close\" (click)=\"onCloseChatWindow(window)\">X</a>\n                  </div>\n                  <div #chatMessages class=\"ng-chat-messages\">\n                      <div *ngIf=\"window.isLoadingHistory\" class=\"ng-chat-loading-wrapper\">\n                          <div class=\"loader\">Loading history...</div>\n                      </div>\n\n                      <div *ngFor=\"let message of window.messages; let i = index\" [ngClass]=\"{'ng-chat-message': true, 'ng-chat-message-received': message.fromId != userId}\">\n                          <div *ngIf=\"!window.chattingTo.avatar && isAvatarVisible(window, message, i)\" class=\"icon-wrapper\">\n                              <i class=\"user-icon\"></i>\n                          </div>\n                          <img *ngIf=\"window.chattingTo.avatar && isAvatarVisible(window, message, i)\" alt=\"\" class=\"avatar\" height=\"30\" width=\"30\" [src]=\"window.chattingTo.avatar\" />\n                          <span [innerHtml]=\"message.message | emojify:emojisEnabled | linkfy:linkfyEnabled\"></span>\n                      </div>\n                  </div>\n                  <input #chatWindowInput [ngModel]=\"window.newMessage | emojify:emojisEnabled\" (ngModelChange)=\"window.newMessage=$event\" type=\"text\" (keydown)=\"onChatInputTyped($event, window)\" [placeholder]=\"localization.messagePlaceholder\" (blur)=\"toggleWindowFocus(window)\" (focus)=\"toggleWindowFocus(window)\"/>            \n              </ng-container>\n          </div>\n      </div>\n    ",
---
>                 template: "\n      <div id=\"ng-chat\" *ngIf=\"isBootstrapped\">\n          <div id=\"ng-chat-people\" [ngClass]=\"{'ng-chat-people-collapsed':isCollapsed}\">\n              <a href=\"javascript:void(0);\" class=\"ng-chat-title shadowed\" (click)=\"onChatTitleClicked($event)\">\n                  <span>\n                      {{localization.title}}\n                  </span>\n              </a>\n              <input id=\"ng-chat-search_friend\" type=\"search\" [placeholder]=\"localization.searchPlaceholder\" [(ngModel)]=\"searchInput\"/>\n              <ul id=\"ng-chat-users\" *ngIf=\"!isCollapsed\">\n                  <li *ngFor=\"let user of filteredUsers\" (click)=\"openChatWindow(user, true, true)\">\n                      <div *ngIf=\"!user.avatar\"  class=\"icon-wrapper\">\n                          <i class=\"user-icon\"></i>\n                      </div>\n                      <img *ngIf=\"user.avatar\" alt=\"\" class=\"avatar\" height=\"30\" width=\"30\"  src=\"{{user.avatar}}\"/>\n                      <strong title=\"{{user.displayName}}\">{{user.displayName}}</strong>\n                      <!--<span [ngClass]=\"{'ng-chat-user-status': true, 'online': user.status == UserStatus.Online, 'busy': user.status == UserStatus.Busy, 'away': user.status == UserStatus.Away, 'offline': user.status == UserStatus.Offline}\" title=\"{{getStatusTitle(UserStatus[user.status])}}\"></span>-->\n                      <span *ngIf=\"unreadMessagesTotalByUser(user).length > 0\" class=\"ng-chat-unread-messages-count\">{{unreadMessagesTotalByUser(user)}}</span>\n                  </li>\n              </ul>\n          </div>\n          <div *ngFor=\"let window of windows; let i = index\" [ngClass]=\"{'ng-chat-window': true, 'ng-chat-window-collapsed': window.isCollapsed}\" [ngStyle]=\"{'right': friendsListWidth + 20 + windowSizeFactor * i + 'px'}\">\n              <ng-container *ngIf=\"window.isCollapsed\">\n                  <div class=\"ng-chat-title\" (click)=\"onChatWindowClicked(window)\">\n                      <strong title=\"{{window.chattingTo.displayName}}\">\n                          {{window.chattingTo.displayName}}\n                      </strong>\n                      <!--<span [ngClass]=\"{'ng-chat-user-status': true, 'online': window.chattingTo.status == UserStatus.Online, 'busy': window.chattingTo.status == UserStatus.Busy, 'away': window.chattingTo.status == UserStatus.Away, 'offline': window.chattingTo.status == UserStatus.Offline}\" title=\"{{getStatusTitle(UserStatus[window.chattingTo.status])}}\"></span>-->\n                      <span *ngIf=\"unreadMessagesTotal(window).length > 0\" class=\"ng-chat-unread-messages-count\">{{unreadMessagesTotal(window)}}</span>\n                      <a href=\"javascript:void(0);\" class=\"ng-chat-close\" (click)=\"onCloseChatWindow(window)\">X</a>\n                  </div>\n              </ng-container>\n              <ng-container *ngIf=\"!window.isCollapsed\">\n                  <div class=\"ng-chat-title\" (click)=\"onChatWindowClicked(window)\">\n                      <strong title=\"{{window.chattingTo.displayName}}\">\n                          {{window.chattingTo.displayName}}\n                      </strong>\n                      <!--<span [ngClass]=\"{'ng-chat-user-status': true, 'online': window.chattingTo.status == UserStatus.Online, 'busy': window.chattingTo.status == UserStatus.Busy, 'away': window.chattingTo.status == UserStatus.Away, 'offline': window.chattingTo.status == UserStatus.Offline}\" title=\"{{getStatusTitle(UserStatus[window.chattingTo.status])}}\"></span>-->\n                      <span *ngIf=\"unreadMessagesTotal(window).length > 0\" class=\"ng-chat-unread-messages-count\">{{unreadMessagesTotal(window)}}</span>\n                      <a href=\"javascript:void(0);\" class=\"ng-chat-close\" (click)=\"onCloseChatWindow(window)\">X</a>\n                  </div>\n                  <div #chatMessages class=\"ng-chat-messages\">\n                      <div *ngIf=\"window.isLoadingHistory\" class=\"ng-chat-loading-wrapper\">\n                          <div class=\"loader\">Loading history...</div>\n                      </div>\n\n                      <div *ngFor=\"let message of window.messages; let i = index\" [ngClass]=\"{'ng-chat-message': true, 'ng-chat-message-received': message.fromId != userId}\">\n                          <div *ngIf=\"!window.chattingTo.avatar && isAvatarVisible(window, message, i)\" class=\"icon-wrapper\">\n                              <i class=\"user-icon\"></i>\n                          </div>\n                          <img *ngIf=\"window.chattingTo.avatar && isAvatarVisible(window, message, i)\" alt=\"\" class=\"avatar\" height=\"30\" width=\"30\" [src]=\"window.chattingTo.avatar\" />\n                          <span [innerHtml]=\"message.message | emojify:emojisEnabled | linkfy:linkfyEnabled\"></span>\n                      </div>\n                  </div>\n                  <input #chatWindowInput [ngModel]=\"window.newMessage | emojify:emojisEnabled\" (ngModelChange)=\"window.newMessage=$event\" type=\"text\" (keydown)=\"onChatInputTyped($event, window)\" [placeholder]=\"localization.messagePlaceholder\" (blur)=\"toggleWindowFocus(window)\" (focus)=\"toggleWindowFocus(window)\"/>            \n              </ng-container>\n          </div>\n      </div>\n    ",
